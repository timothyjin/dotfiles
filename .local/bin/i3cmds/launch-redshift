#!/bin/sh

# Wrapper script for starting redshift.
# Kills all existing redshift instances and starts a new one based on the active display(s).

killall -q redshift
while pgrep -u $(id -u) -x redshift >/dev/null; do sleep 1; done

# Start redshift on external display(s) if any are being used.
[ "$(current-display)" != "$INTERNAL" ] && DISPLAY=:8 redshift &

# Start redshift on internal display
redshift &
