#!/bin/sh

# Terminate already running bar instances
killall -q polybar

# Wait until the processes have been shut down
while pidof polybar >/dev/null; do sleep 1; done

# Launch bars
current=$(current-display)
if [ "$current" = "$INTERNAL" ]; then
    MONITOR="$INTERNAL" polybar top &
else
    for output in $current
    do
        if [ "$output" = "$INTERNAL" ]
        then
            MONITOR="$output" polybar side &
        else
            MONITOR="$output" polybar main &
        fi
    done
fi
